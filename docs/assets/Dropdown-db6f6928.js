import{r as c,L as J,aa as R,d as V}from"./index-a3b6d2d0.js";import{a as Q,T as Z}from"./button-eb3dc422.js";function L(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_(Object(t),!0).forEach(function(n){L(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ee(e){if(Array.isArray(e))return e}function te(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],a=!0,o=!1,v,d;try{for(t=t.call(e);!(a=(v=t.next()).done)&&(n.push(v.value),!(r&&n.length===r));a=!0);}catch(m){o=!0,d=m}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw d}}return n}}function x(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function re(e,r){if(!!e){if(typeof e=="string")return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}}function ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(e,r){return ee(e)||te(e,r)||re(e,r)||ne()}function ae(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function oe(e,r){if(e==null)return{};var t=ae(e,r),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}var b={adjustX:1,adjustY:1},h=[0,0],le={topLeft:{points:["bl","tl"],overflow:b,offset:[0,-4],targetOffset:h},topCenter:{points:["bc","tc"],overflow:b,offset:[0,-4],targetOffset:h},topRight:{points:["br","tr"],overflow:b,offset:[0,-4],targetOffset:h},bottomLeft:{points:["tl","bl"],overflow:b,offset:[0,4],targetOffset:h},bottomCenter:{points:["tc","bc"],overflow:b,offset:[0,4],targetOffset:h},bottomRight:{points:["tr","br"],overflow:b,offset:[0,4],targetOffset:h}},ue=R.ESC,fe=R.TAB;function se(e){var r=e.visible,t=e.setTriggerVisible,n=e.triggerRef,a=e.onVisibleChange,o=e.autoFocus,v=c.useRef(!1),d=function(){if(r&&n.current){var l,f,s,g;(l=n.current)===null||l===void 0||(f=l.triggerRef)===null||f===void 0||(s=f.current)===null||s===void 0||(g=s.focus)===null||g===void 0||g.call(s),t(!1),typeof a=="function"&&a(!1)}},m=function(){var l,f,s,g,C=Q((l=n.current)===null||l===void 0||(f=l.popupRef)===null||f===void 0||(s=f.current)===null||s===void 0||(g=s.getElement)===null||g===void 0?void 0:g.call(s)),y=C[0];return y!=null&&y.focus?(y.focus(),v.current=!0,!0):!1},O=function(l){switch(l.keyCode){case ue:d();break;case fe:{var f=!1;v.current||(f=m()),f?l.preventDefault():d();break}}};c.useEffect(function(){return r?(window.addEventListener("keydown",O),o&&J(m,3),function(){window.removeEventListener("keydown",O),v.current=!1}):function(){v.current=!1}},[r])}var ce=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function ve(e,r){var t=e.arrow,n=t===void 0?!1:t,a=e.prefixCls,o=a===void 0?"rc-dropdown":a,v=e.transitionName,d=e.animation,m=e.align,O=e.placement,w=O===void 0?"bottomLeft":O,l=e.placements,f=l===void 0?le:l,s=e.getPopupContainer,g=e.showAction,C=e.hideAction,y=e.overlayClassName,D=e.overlayStyle,F=e.visible,T=e.trigger,M=T===void 0?["hover"]:T,W=e.autoFocus,I=oe(e,ce),K=c.useState(),N=ie(K,2),H=N[0],A=N[1],P="visible"in e?F:H,E=c.useRef(null);c.useImperativeHandle(r,function(){return E.current}),se({visible:P,setTriggerVisible:A,triggerRef:E,onVisibleChange:e.onVisibleChange,autoFocus:W});var B=function(){var i=e.overlay,u;return typeof i=="function"?u=i():u=i,u},U=function(i){var u=e.onOverlayClick;A(!1),u&&u(i)},X=function(i){var u=e.onVisibleChange;A(i),typeof u=="function"&&u(i)},S=function(){var i=B();return c.createElement(c.Fragment,null,n&&c.createElement("div",{className:"".concat(o,"-arrow")}),i)},Y=function(){var i=e.overlay;return typeof i=="function"?S:S()},$=function(){var i=e.minOverlayWidthMatchTrigger,u=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?i:!u},q=function(){var i=e.openClassName;return i!==void 0?i:"".concat(o,"-open")},z=function(){var i=e.children,u=i.props?i.props:{},G=V(u.className,q());return P&&i?c.cloneElement(i,{className:G}):i},j=C;return!j&&M.indexOf("contextMenu")!==-1&&(j=["click"]),c.createElement(Z,k(k({builtinPlacements:f},I),{},{prefixCls:o,ref:E,popupClassName:V(y,L({},"".concat(o,"-show-arrow"),n)),popupStyle:D,action:M,showAction:g,hideAction:j||[],popupPlacement:w,popupAlign:m,popupTransitionName:v,popupAnimation:d,popupVisible:P,stretch:$()?"minWidth":"",popup:Y(),onPopupVisibleChange:X,onPopupClick:U,getPopupContainer:s}),z())}const pe=c.forwardRef(ve);export{pe as D};
