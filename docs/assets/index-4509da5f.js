import{r as n,a as m,j as e,R as S}from"./jsx-runtime-96806aeb.js";import{u as g}from"./useClass-0fad7c64.js";import{n as B,u as H,j as V,o as q,a as E,p as D}from"./routes-c418275a.js";import{u as T}from"./useResize-dacf01f6.js";import{P as G}from"./class-particle-2983fd0e.js";import{g as J,m as j,h as K}from"./api-rtkq-95c736af.js";import"./index-dcd7ef69.js";import{F as r}from"./index-d8e374c7.js";import{C as I}from"./index-00689c9c.js";import{I as h}from"./index-bae2a3e7.js";import{A as P,_ as v}from"./AntdIcon-e0aed268.js";import{C as Q}from"./index-51f83f43.js";import{B as F}from"./index-5d6fcbf9.js";import"./context-40fed8c9.js";import"./zoom-11727d43.js";import"./EyeOutlined-58794dda.js";var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const X=W;var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const Z=Y;function R(t){return _=>{_.preventDefault(),t==null||t(_)}}const N=g(B);function ee(t){const{particleNum:_=50,className:o,...w}=t,s=n.useRef(null),u=T(i=>{const d=s.current;d.width=i.width,d.height=i.height;const l=new G(d,_);return l.animate(),l.bindEvent(),()=>{l.abortAnimate(),l.abortEvent()}},[s]);return m("div",{...w,ref:u,className:N("particle")+o,children:[e("canvas",{ref:s,className:N("particle-canvas")}),e("div",{className:N("particle-content"),children:t.children})]})}var $=function(_,o){return n.createElement(P,v(v({},_),{},{ref:o,icon:X}))};$.displayName="LockOutlined";const L=n.forwardRef($);var z=function(_,o){return n.createElement(P,v(v({},_),{},{ref:o,icon:Z}))};z.displayName="UserOutlined";const M=n.forwardRef(z),_e="_absolute_19w76_1",te="_relative_19w76_5",re="_fixed_19w76_9",ne="_sticky_19w76_13",oe="_none_19w76_17",se="_flex_19w76_21",ae="_b_19w76_234",we="_border_19w76_359",le="_shadow_19w76_369",ce="_clearfix_19w76_857",O={absolute:_e,relative:te,fixed:re,sticky:ne,none:oe,flex:se,"flex-1":"_flex-1_19w76_25","flex-direction-column":"_flex-direction-column_19w76_29","flex-1-hidden":"_flex-1-hidden_19w76_33","flex-1-auto":"_flex-1-auto_19w76_38","flex-1-overlay":"_flex-1-overlay_19w76_43","flex-column":"_flex-column_19w76_48","justify-start":"_justify-start_19w76_54","align-start":"_align-start_19w76_58","start-start":"_start-start_19w76_62","start-center":"_start-center_19w76_67","start-end":"_start-end_19w76_72","start-stretch":"_start-stretch_19w76_77","start-between":"_start-between_19w76_82","start-around":"_start-around_19w76_87","start-evenly":"_start-evenly_19w76_92","justify-center":"_justify-center_19w76_97","align-center":"_align-center_19w76_101","center-start":"_center-start_19w76_105","center-center":"_center-center_19w76_110","center-end":"_center-end_19w76_115","center-stretch":"_center-stretch_19w76_120","center-between":"_center-between_19w76_125","center-around":"_center-around_19w76_130","center-evenly":"_center-evenly_19w76_135","justify-end":"_justify-end_19w76_140","align-end":"_align-end_19w76_144","end-start":"_end-start_19w76_148","end-center":"_end-center_19w76_153","end-end":"_end-end_19w76_158","end-stretch":"_end-stretch_19w76_163","end-between":"_end-between_19w76_168","end-around":"_end-around_19w76_173","end-evenly":"_end-evenly_19w76_178","justify-stretch":"_justify-stretch_19w76_183","align-stretch":"_align-stretch_19w76_187","stretch-start":"_stretch-start_19w76_191","stretch-center":"_stretch-center_19w76_196","stretch-end":"_stretch-end_19w76_201","stretch-stretch":"_stretch-stretch_19w76_206","stretch-between":"_stretch-between_19w76_211","stretch-around":"_stretch-around_19w76_216","stretch-evenly":"_stretch-evenly_19w76_221","justify-between":"_justify-between_19w76_226","align-between":"_align-between_19w76_230","between-start":"_between-start_19w76_234","between-center":"_between-center_19w76_239","between-end":"_between-end_19w76_244","between-stretch":"_between-stretch_19w76_249","between-between":"_between-between_19w76_254","between-around":"_between-around_19w76_259","between-evenly":"_between-evenly_19w76_264","justify-around":"_justify-around_19w76_269","align-around":"_align-around_19w76_273","around-start":"_around-start_19w76_277","around-center":"_around-center_19w76_282","around-end":"_around-end_19w76_287","around-stretch":"_around-stretch_19w76_292","around-between":"_around-between_19w76_297","around-around":"_around-around_19w76_302","around-evenly":"_around-evenly_19w76_307","justify-evenly":"_justify-evenly_19w76_312","align-evenly":"_align-evenly_19w76_316","evenly-start":"_evenly-start_19w76_320","evenly-center":"_evenly-center_19w76_325","evenly-end":"_evenly-end_19w76_330","evenly-stretch":"_evenly-stretch_19w76_335","evenly-between":"_evenly-between_19w76_340","evenly-around":"_evenly-around_19w76_345","evenly-evenly":"_evenly-evenly_19w76_350",b:ae,border:we,"m-center":"_m-center_19w76_363",shadow:le,"card-box":"_card-box_19w76_369","w-25":"_w-25_19w76_373","h-25":"_h-25_19w76_377","wh-25":"_wh-25_19w76_381","w-50":"_w-50_19w76_386","h-50":"_h-50_19w76_390","wh-50":"_wh-50_19w76_394","w-75":"_w-75_19w76_399","h-75":"_h-75_19w76_403","wh-75":"_wh-75_19w76_407","w-100":"_w-100_19w76_412","h-100":"_h-100_19w76_416","wh-100":"_wh-100_19w76_420","p-0":"_p-0_19w76_425","px-0":"_px-0_19w76_429","py-0":"_py-0_19w76_434","pt-0":"_pt-0_19w76_439","pr-0":"_pr-0_19w76_443","pb-0":"_pb-0_19w76_447","pl-0":"_pl-0_19w76_451","p-1":"_p-1_19w76_455","px-1":"_px-1_19w76_459","py-1":"_py-1_19w76_464","pt-1":"_pt-1_19w76_469","pr-1":"_pr-1_19w76_473","pb-1":"_pb-1_19w76_477","pl-1":"_pl-1_19w76_481","p-2":"_p-2_19w76_485","px-2":"_px-2_19w76_489","py-2":"_py-2_19w76_494","pt-2":"_pt-2_19w76_499","pr-2":"_pr-2_19w76_503","pb-2":"_pb-2_19w76_507","pl-2":"_pl-2_19w76_511","p-3":"_p-3_19w76_515","px-3":"_px-3_19w76_519","py-3":"_py-3_19w76_524","pt-3":"_pt-3_19w76_529","pr-3":"_pr-3_19w76_533","pb-3":"_pb-3_19w76_537","pl-3":"_pl-3_19w76_541","b-0":"_b-0_19w76_545","bx-0":"_bx-0_19w76_549","by-0":"_by-0_19w76_554","bt-0":"_bt-0_19w76_559","br-0":"_br-0_19w76_563","bb-0":"_bb-0_19w76_567","bl-0":"_bl-0_19w76_571","b-1":"_b-1_19w76_575","bx-1":"_bx-1_19w76_579","by-1":"_by-1_19w76_584","bt-1":"_bt-1_19w76_589","br-1":"_br-1_19w76_593","bb-1":"_bb-1_19w76_597","bl-1":"_bl-1_19w76_601","b-2":"_b-2_19w76_605","bx-2":"_bx-2_19w76_609","by-2":"_by-2_19w76_614","bt-2":"_bt-2_19w76_619","br-2":"_br-2_19w76_623","bb-2":"_bb-2_19w76_627","bl-2":"_bl-2_19w76_631","b-3":"_b-3_19w76_635","bx-3":"_bx-3_19w76_639","by-3":"_by-3_19w76_644","bt-3":"_bt-3_19w76_649","br-3":"_br-3_19w76_653","bb-3":"_bb-3_19w76_657","bl-3":"_bl-3_19w76_661","m-0":"_m-0_19w76_665","mx-0":"_mx-0_19w76_669","my-0":"_my-0_19w76_674","mt-0":"_mt-0_19w76_679","mr-0":"_mr-0_19w76_683","mb-0":"_mb-0_19w76_687","ml-0":"_ml-0_19w76_691","m-1":"_m-1_19w76_695","mx-1":"_mx-1_19w76_699","my-1":"_my-1_19w76_704","mt-1":"_mt-1_19w76_709","mr-1":"_mr-1_19w76_713","mb-1":"_mb-1_19w76_717","ml-1":"_ml-1_19w76_721","m-2":"_m-2_19w76_725","mx-2":"_mx-2_19w76_729","my-2":"_my-2_19w76_734","mt-2":"_mt-2_19w76_739","mr-2":"_mr-2_19w76_743","mb-2":"_mb-2_19w76_747","ml-2":"_ml-2_19w76_751","m-3":"_m-3_19w76_755","mx-3":"_mx-3_19w76_759","my-3":"_my-3_19w76_764","mt-3":"_mt-3_19w76_769","mr-3":"_mr-3_19w76_773","mb-3":"_mb-3_19w76_777","ml-3":"_ml-3_19w76_781","bgc-pirmary":"_bgc-pirmary_19w76_785","bgc-success":"_bgc-success_19w76_789","bgc-warning":"_bgc-warning_19w76_793","bgc-danger":"_bgc-danger_19w76_797","bgc-info":"_bgc-info_19w76_801","bgc-dark-fill":"_bgc-dark-fill_19w76_805","overflow-x-auto":"_overflow-x-auto_19w76_809","overflow-x-hidden":"_overflow-x-hidden_19w76_813","overflow-x-scroll":"_overflow-x-scroll_19w76_817","overflow-x-overlay":"_overflow-x-overlay_19w76_821","overflow-y-auto":"_overflow-y-auto_19w76_825","overflow-y-hidden":"_overflow-y-hidden_19w76_829","overflow-y-scroll":"_overflow-y-scroll_19w76_833","overflow-y-overlay":"_overflow-y-overlay_19w76_837","overflow-hidden":"_overflow-hidden_19w76_841","overflow-auto":"_overflow-auto_19w76_845","overflow-scroll":"_overflow-scroll_19w76_849","overflow-overlay":"_overflow-overlay_19w76_853",clearfix:ce,"float-left":"_float-left_19w76_863","float-right":"_float-right_19w76_867","vis-hidden":"_vis-hidden_19w76_871","text-center":"_text-center_19w76_875","text-end":"_text-end_19w76_879","text-primary":"_text-primary_19w76_883","text-success":"_text-success_19w76_887","text-warning":"_text-warning_19w76_891","text-danger":"_text-danger_19w76_895","text-info":"_text-info_19w76_899","text-black":"_text-black_19w76_903","text-white":"_text-white_19w76_907","login-root":"_login-root_19w76_911","rotate-y-180":"_rotate-y-180_19w76_944","rotate-y-0":"_rotate-y-0_19w76_948","login-form-button":"_login-form-button_19w76_952","site-form-item-icon":"_site-form-item-icon_19w76_956","login-form-forgot":"_login-form-forgot_19w76_960"},b=g(O);function ie(t){const{isRegister:_,onRegisterClick:o}=t,w=n.useCallback(R(o),[]),s=H(),u=V(),[i]=J(),[d]=r.useForm(),l=n.useCallback(p=>{i(p).unwrap().then(c=>{const{isOk:a,token:x,username:k,invalidTime:y,mes:U}=c,A={username:k,invalidTime:y,token:x,remember:p.remember,isLogined:!0};if(a){s(q(A)),u("/",{replace:!0});return}j.warning(U)}).catch(c=>{console.error(c)})},[]);return e(I,{className:b(["card-login",_?"rotate-y-180":""]),children:m(r,{form:d,name:"normal_login",initialValues:{remember:!0},onFinish:l,className:"login-form",children:[e(r.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:e(h,{prefix:e(M,{className:b("site-form-item-icon")}),placeholder:"手机号"})}),e(r.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:e(h,{prefix:e(L,{className:b("site-form-item-icon")}),type:"password",placeholder:"密码"})}),m(r.Item,{children:[e(r.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e(Q,{children:"Remember me"})}),e("a",{className:b("login-form-forgot"),href:"xxx",onClick:R(),children:"Forgot password"})]}),m(r.Item,{children:[e(F,{type:"primary",htmlType:"submit",className:b("login-form-button"),children:"Login"}),"Or"," ",e("a",{onClick:w,href:"xxx",children:"register now!"})]})]})})}const f=g(O);function de(t){const{isRegister:_,onLoginClick:o}=t,w=n.useCallback(R(o),[]),[s]=K(),[u]=r.useForm(),[i,d]=n.useState({validateStatus:void 0,help:void 0}),l=n.useCallback(c=>{s(c).unwrap().then(a=>{if(a.isOk){j.success(a.message),o();return}j.warning(a.message)}).catch(a=>console.error(a))},[]),p=n.useCallback((c,a)=>{if(!c.password2)return;const{password:x}=a;d(k=>{const y=c.password2===x;return{...k,validateStatus:y?void 0:"error",help:y?void 0:"两次输入的密码不一致！"}})},[]);return e(I,{className:f(["card-register",_?"rotate-y-0":""]),children:m(r,{form:u,onFinish:l,onValuesChange:p,children:[e(r.Item,{name:"username",rules:[{required:!0}],children:e(h,{prefix:e(M,{className:f("site-form-item-icon")}),placeholder:"手机号"})}),e(r.Item,{name:"password",rules:[{required:!0}],children:e(h,{prefix:e(L,{className:f("site-form-item-icon")}),type:"password",placeholder:"密码"})}),e(r.Item,{name:"password2",rules:[{required:!0}],validateStatus:i.validateStatus,help:i.help,children:e(h,{prefix:e(L,{className:f("site-form-item-icon")}),type:"password",placeholder:"确认密码"})}),m(r.Item,{children:[e(F,{type:"primary",htmlType:"submit",className:f("login-form-button"),children:"Register"}),"Or"," ",e("a",{onClick:w,href:"xxx",children:"login now!"})]})]})})}const C=g(O),me=S.memo(ee);function ue(){if(E(s=>s.auth.isLogined))return e(D,{to:"/",replace:!0});const[_,o]=n.useState(!1),w=n.useCallback(()=>o(s=>!s),[]);return e(me,{className:C("h-100"),children:e("div",{className:C("login-root"),children:m("div",{className:C("card-box"),children:[e(ie,{isRegister:_,onRegisterClick:w}),e(de,{isRegister:_,onLoginClick:w})]})})})}const Ie=S.memo(ue);export{ue as PageLogin,Ie as default};
