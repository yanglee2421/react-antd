import{r as o,a as m,j as e,R as O}from"./jsx-runtime-d4f0a224.js";import{u as w}from"./useClass-0fad7c64.js";import{s as V,C as P}from"./routes-be5eb6dc.js";import{u as z,m as A,o as B,a as M,N as E}from"./index-73e15bd9.js";import{u as D}from"./useResize-ce2963a5.js";import{P as T}from"./class-particle-0b7eb80c.js";import{q as U,m as C,B as S,r as G}from"./api-rtkq-ff3ef5cb.js";import"./index-d971bd58.js";import{F as _}from"./index-7efc0e4d.js";import{I as f,C as J}from"./index-1b74af41.js";import{U as F}from"./UserOutlined-050f6161.js";import{A as K,_ as I}from"./AntdIcon-68ee573e.js";import"./index-67588a78.js";import"./row-d5930abe.js";import"./zoom-4da3e81d.js";import"./index-177b9d99.js";import"./EyeOutlined-adb668ce.js";var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const W=Q;function j(t){return n=>{n.preventDefault(),t==null||t(n)}}const k=w(V);function X(t){const{particleNum:n=50,className:s,...a}=t,r=o.useRef(null),u=D(i=>{const d=r.current;d.width=i.width,d.height=i.height;const l=new T(d,n);return l.animate(),l.bindEvent(),()=>{l.abortAnimate(),l.abortEvent()}},[r]);return m("div",{...a,ref:u,className:k("particle")+s,children:[e("canvas",{ref:r,className:k("particle-canvas")}),e("div",{className:k("particle-content"),children:t.children})]})}var $=function(n,s){return o.createElement(K,I(I({},n),{},{ref:s,icon:W}))};$.displayName="LockOutlined";const L=o.forwardRef($),Y="_absolute_14hn6_1",Z="_relative_14hn6_5",ee="_fixed_14hn6_9",ne="_sticky_14hn6_13",_e="_none_14hn6_17",te="_flex_14hn6_21",re="_b_14hn6_234",oe="_border_14hn6_359",se="_shadow_14hn6_369",he="_clearfix_14hn6_857",R={absolute:Y,relative:Z,fixed:ee,sticky:ne,none:_e,flex:te,"flex-1":"_flex-1_14hn6_25","flex-direction-column":"_flex-direction-column_14hn6_29","flex-1-hidden":"_flex-1-hidden_14hn6_33","flex-1-auto":"_flex-1-auto_14hn6_38","flex-1-overlay":"_flex-1-overlay_14hn6_43","flex-column":"_flex-column_14hn6_48","justify-start":"_justify-start_14hn6_54","align-start":"_align-start_14hn6_58","start-start":"_start-start_14hn6_62","start-center":"_start-center_14hn6_67","start-end":"_start-end_14hn6_72","start-stretch":"_start-stretch_14hn6_77","start-between":"_start-between_14hn6_82","start-around":"_start-around_14hn6_87","start-evenly":"_start-evenly_14hn6_92","justify-center":"_justify-center_14hn6_97","align-center":"_align-center_14hn6_101","center-start":"_center-start_14hn6_105","center-center":"_center-center_14hn6_110","center-end":"_center-end_14hn6_115","center-stretch":"_center-stretch_14hn6_120","center-between":"_center-between_14hn6_125","center-around":"_center-around_14hn6_130","center-evenly":"_center-evenly_14hn6_135","justify-end":"_justify-end_14hn6_140","align-end":"_align-end_14hn6_144","end-start":"_end-start_14hn6_148","end-center":"_end-center_14hn6_153","end-end":"_end-end_14hn6_158","end-stretch":"_end-stretch_14hn6_163","end-between":"_end-between_14hn6_168","end-around":"_end-around_14hn6_173","end-evenly":"_end-evenly_14hn6_178","justify-stretch":"_justify-stretch_14hn6_183","align-stretch":"_align-stretch_14hn6_187","stretch-start":"_stretch-start_14hn6_191","stretch-center":"_stretch-center_14hn6_196","stretch-end":"_stretch-end_14hn6_201","stretch-stretch":"_stretch-stretch_14hn6_206","stretch-between":"_stretch-between_14hn6_211","stretch-around":"_stretch-around_14hn6_216","stretch-evenly":"_stretch-evenly_14hn6_221","justify-between":"_justify-between_14hn6_226","align-between":"_align-between_14hn6_230","between-start":"_between-start_14hn6_234","between-center":"_between-center_14hn6_239","between-end":"_between-end_14hn6_244","between-stretch":"_between-stretch_14hn6_249","between-between":"_between-between_14hn6_254","between-around":"_between-around_14hn6_259","between-evenly":"_between-evenly_14hn6_264","justify-around":"_justify-around_14hn6_269","align-around":"_align-around_14hn6_273","around-start":"_around-start_14hn6_277","around-center":"_around-center_14hn6_282","around-end":"_around-end_14hn6_287","around-stretch":"_around-stretch_14hn6_292","around-between":"_around-between_14hn6_297","around-around":"_around-around_14hn6_302","around-evenly":"_around-evenly_14hn6_307","justify-evenly":"_justify-evenly_14hn6_312","align-evenly":"_align-evenly_14hn6_316","evenly-start":"_evenly-start_14hn6_320","evenly-center":"_evenly-center_14hn6_325","evenly-end":"_evenly-end_14hn6_330","evenly-stretch":"_evenly-stretch_14hn6_335","evenly-between":"_evenly-between_14hn6_340","evenly-around":"_evenly-around_14hn6_345","evenly-evenly":"_evenly-evenly_14hn6_350",b:re,border:oe,"m-center":"_m-center_14hn6_363",shadow:se,"card-box":"_card-box_14hn6_369","w-25":"_w-25_14hn6_373","h-25":"_h-25_14hn6_377","wh-25":"_wh-25_14hn6_381","w-50":"_w-50_14hn6_386","h-50":"_h-50_14hn6_390","wh-50":"_wh-50_14hn6_394","w-75":"_w-75_14hn6_399","h-75":"_h-75_14hn6_403","wh-75":"_wh-75_14hn6_407","w-100":"_w-100_14hn6_412","h-100":"_h-100_14hn6_416","wh-100":"_wh-100_14hn6_420","p-0":"_p-0_14hn6_425","px-0":"_px-0_14hn6_429","py-0":"_py-0_14hn6_434","pt-0":"_pt-0_14hn6_439","pr-0":"_pr-0_14hn6_443","pb-0":"_pb-0_14hn6_447","pl-0":"_pl-0_14hn6_451","p-1":"_p-1_14hn6_455","px-1":"_px-1_14hn6_459","py-1":"_py-1_14hn6_464","pt-1":"_pt-1_14hn6_469","pr-1":"_pr-1_14hn6_473","pb-1":"_pb-1_14hn6_477","pl-1":"_pl-1_14hn6_481","p-2":"_p-2_14hn6_485","px-2":"_px-2_14hn6_489","py-2":"_py-2_14hn6_494","pt-2":"_pt-2_14hn6_499","pr-2":"_pr-2_14hn6_503","pb-2":"_pb-2_14hn6_507","pl-2":"_pl-2_14hn6_511","p-3":"_p-3_14hn6_515","px-3":"_px-3_14hn6_519","py-3":"_py-3_14hn6_524","pt-3":"_pt-3_14hn6_529","pr-3":"_pr-3_14hn6_533","pb-3":"_pb-3_14hn6_537","pl-3":"_pl-3_14hn6_541","b-0":"_b-0_14hn6_545","bx-0":"_bx-0_14hn6_549","by-0":"_by-0_14hn6_554","bt-0":"_bt-0_14hn6_559","br-0":"_br-0_14hn6_563","bb-0":"_bb-0_14hn6_567","bl-0":"_bl-0_14hn6_571","b-1":"_b-1_14hn6_575","bx-1":"_bx-1_14hn6_579","by-1":"_by-1_14hn6_584","bt-1":"_bt-1_14hn6_589","br-1":"_br-1_14hn6_593","bb-1":"_bb-1_14hn6_597","bl-1":"_bl-1_14hn6_601","b-2":"_b-2_14hn6_605","bx-2":"_bx-2_14hn6_609","by-2":"_by-2_14hn6_614","bt-2":"_bt-2_14hn6_619","br-2":"_br-2_14hn6_623","bb-2":"_bb-2_14hn6_627","bl-2":"_bl-2_14hn6_631","b-3":"_b-3_14hn6_635","bx-3":"_bx-3_14hn6_639","by-3":"_by-3_14hn6_644","bt-3":"_bt-3_14hn6_649","br-3":"_br-3_14hn6_653","bb-3":"_bb-3_14hn6_657","bl-3":"_bl-3_14hn6_661","m-0":"_m-0_14hn6_665","mx-0":"_mx-0_14hn6_669","my-0":"_my-0_14hn6_674","mt-0":"_mt-0_14hn6_679","mr-0":"_mr-0_14hn6_683","mb-0":"_mb-0_14hn6_687","ml-0":"_ml-0_14hn6_691","m-1":"_m-1_14hn6_695","mx-1":"_mx-1_14hn6_699","my-1":"_my-1_14hn6_704","mt-1":"_mt-1_14hn6_709","mr-1":"_mr-1_14hn6_713","mb-1":"_mb-1_14hn6_717","ml-1":"_ml-1_14hn6_721","m-2":"_m-2_14hn6_725","mx-2":"_mx-2_14hn6_729","my-2":"_my-2_14hn6_734","mt-2":"_mt-2_14hn6_739","mr-2":"_mr-2_14hn6_743","mb-2":"_mb-2_14hn6_747","ml-2":"_ml-2_14hn6_751","m-3":"_m-3_14hn6_755","mx-3":"_mx-3_14hn6_759","my-3":"_my-3_14hn6_764","mt-3":"_mt-3_14hn6_769","mr-3":"_mr-3_14hn6_773","mb-3":"_mb-3_14hn6_777","ml-3":"_ml-3_14hn6_781","bgc-pirmary":"_bgc-pirmary_14hn6_785","bgc-success":"_bgc-success_14hn6_789","bgc-warning":"_bgc-warning_14hn6_793","bgc-danger":"_bgc-danger_14hn6_797","bgc-info":"_bgc-info_14hn6_801","bgc-dark-fill":"_bgc-dark-fill_14hn6_805","overflow-x-auto":"_overflow-x-auto_14hn6_809","overflow-x-hidden":"_overflow-x-hidden_14hn6_813","overflow-x-scroll":"_overflow-x-scroll_14hn6_817","overflow-x-overlay":"_overflow-x-overlay_14hn6_821","overflow-y-auto":"_overflow-y-auto_14hn6_825","overflow-y-hidden":"_overflow-y-hidden_14hn6_829","overflow-y-scroll":"_overflow-y-scroll_14hn6_833","overflow-y-overlay":"_overflow-y-overlay_14hn6_837","overflow-hidden":"_overflow-hidden_14hn6_841","overflow-auto":"_overflow-auto_14hn6_845","overflow-scroll":"_overflow-scroll_14hn6_849","overflow-overlay":"_overflow-overlay_14hn6_853",clearfix:he,"float-left":"_float-left_14hn6_863","float-right":"_float-right_14hn6_867","vis-hidden":"_vis-hidden_14hn6_871","text-center":"_text-center_14hn6_875","text-end":"_text-end_14hn6_879","text-primary":"_text-primary_14hn6_883","text-success":"_text-success_14hn6_887","text-warning":"_text-warning_14hn6_891","text-danger":"_text-danger_14hn6_895","text-info":"_text-info_14hn6_899","text-black":"_text-black_14hn6_903","text-white":"_text-white_14hn6_907","login-root":"_login-root_14hn6_911","rotate-y-180":"_rotate-y-180_14hn6_944","rotate-y-0":"_rotate-y-0_14hn6_948","login-form-button":"_login-form-button_14hn6_952","site-form-item-icon":"_site-form-item-icon_14hn6_956","login-form-forgot":"_login-form-forgot_14hn6_960"},b=w(R);function ae(t){const{isRegister:n,onRegisterClick:s}=t,a=o.useCallback(j(s),[]),r=z(),u=A(),[i]=U(),[d]=_.useForm(),l=o.useCallback(y=>{i(y).unwrap().then(c=>{const{isOk:h,token:g,username:x,invalidTime:v,mes:q}=c,H={username:x,invalidTime:v,token:g,remember:y.remember,isLogined:!0};if(h){r(B(H)),u("/",{replace:!0});return}C.warning(q)}).catch(c=>{console.error(c)})},[]);return e(P,{className:b(["card-login",n?"rotate-y-180":""]),children:m(_,{form:d,name:"normal_login",initialValues:{remember:!0},onFinish:l,className:"login-form",children:[e(_.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:e(f,{prefix:e(F,{className:b("site-form-item-icon")}),placeholder:"手机号"})}),e(_.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:e(f,{prefix:e(L,{className:b("site-form-item-icon")}),type:"password",placeholder:"密码"})}),m(_.Item,{children:[e(_.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e(J,{children:"Remember me"})}),e("a",{className:b("login-form-forgot"),href:"xxx",onClick:j(),children:"Forgot password"})]}),m(_.Item,{children:[e(S,{type:"primary",htmlType:"submit",className:b("login-form-button"),children:"Login"}),"Or"," ",e("a",{onClick:a,href:"xxx",children:"register now!"})]})]})})}const p=w(R);function le(t){const{isRegister:n,onLoginClick:s}=t,a=o.useCallback(j(s),[]),[r]=G(),[u]=_.useForm(),[i,d]=o.useState({validateStatus:void 0,help:void 0}),l=o.useCallback(c=>{r(c).unwrap().then(h=>{if(h.isOk){C.success(h.message),s();return}C.warning(h.message)}).catch(h=>console.error(h))},[]),y=o.useCallback((c,h)=>{if(!c.password2)return;const{password:g}=h;d(x=>{const v=c.password2===g;return{...x,validateStatus:v?void 0:"error",help:v?void 0:"两次输入的密码不一致！"}})},[]);return e(P,{className:p(["card-register",n?"rotate-y-0":""]),children:m(_,{form:u,onFinish:l,onValuesChange:y,children:[e(_.Item,{name:"username",rules:[{required:!0}],children:e(f,{prefix:e(F,{className:p("site-form-item-icon")}),placeholder:"手机号"})}),e(_.Item,{name:"password",rules:[{required:!0}],children:e(f,{prefix:e(L,{className:p("site-form-item-icon")}),type:"password",placeholder:"密码"})}),e(_.Item,{name:"password2",rules:[{required:!0}],validateStatus:i.validateStatus,help:i.help,children:e(f,{prefix:e(L,{className:p("site-form-item-icon")}),type:"password",placeholder:"确认密码"})}),m(_.Item,{children:[e(S,{type:"primary",htmlType:"submit",className:p("login-form-button"),children:"Register"}),"Or"," ",e("a",{onClick:a,href:"xxx",children:"login now!"})]})]})})}const N=w(R),ce=O.memo(X);function ie(){if(M(r=>r.auth.isLogined))return e(E,{to:"/",replace:!0});const[n,s]=o.useState(!1),a=o.useCallback(()=>s(r=>!r),[]);return e(ce,{className:N("h-100"),children:e("div",{className:N("login-root"),children:m("div",{className:N("card-box"),children:[e(ae,{isRegister:n,onRegisterClick:a}),e(le,{isRegister:n,onLoginClick:a})]})})})}const Ie=O.memo(ie);export{ie as PageLogin,Ie as default};
