import{r as n,R as P,C as O,j as e,N as U,a as u,F as H,u as V,b as q,M as g,c as A}from"./index-a3b6d2d0.js";import{u as N}from"./useClass-051d4e64.js";import{u as E}from"./useResize-e141c79e.js";import{P as T}from"./class-particle-420d30ac.js";import{F as r,I as f,C as B}from"./index-edae1ce3.js";import{C as R}from"./index-7c735e37.js";import{A as L,_ as w}from"./AntdIcon-96a99023.js";import{B as S}from"./button-eb3dc422.js";import"./collapse-53d38b3c.js";import"./index-e6561747.js";import"./useFlexGapSupport-f4c3c6eb.js";import"./index-6009b6f5.js";import"./Dropdown-db6f6928.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const D=$;var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const J=G;var I=function(o,a){return n.createElement(L,w(w({},o),{},{ref:a,icon:D}))};I.displayName="LockOutlined";const k=n.forwardRef(I);var F=function(o,a){return n.createElement(L,w(w({},o),{},{ref:a,icon:J}))};F.displayName="UserOutlined";const M=n.forwardRef(F),K="_absolute_9vens_1",Q="_relative_9vens_5",W="_fixed_9vens_9",X="_sticky_9vens_13",Y="_none_9vens_17",Z="_flex_9vens_21",ee="_b_9vens_234",ne="_border_9vens_359",_e="_shadow_9vens_368",se="_clearfix_9vens_855",j={absolute:K,relative:Q,fixed:W,sticky:X,none:Y,flex:Z,"flex-1":"_flex-1_9vens_25","flex-direction-column":"_flex-direction-column_9vens_29","flex-1-hidden":"_flex-1-hidden_9vens_33","flex-1-auto":"_flex-1-auto_9vens_38","flex-1-overlay":"_flex-1-overlay_9vens_43","flex-column":"_flex-column_9vens_48","justify-start":"_justify-start_9vens_54","align-start":"_align-start_9vens_58","start-start":"_start-start_9vens_62","start-center":"_start-center_9vens_67","start-end":"_start-end_9vens_72","start-stretch":"_start-stretch_9vens_77","start-between":"_start-between_9vens_82","start-around":"_start-around_9vens_87","start-evenly":"_start-evenly_9vens_92","justify-center":"_justify-center_9vens_97","align-center":"_align-center_9vens_101","center-start":"_center-start_9vens_105","center-center":"_center-center_9vens_110","center-end":"_center-end_9vens_115","center-stretch":"_center-stretch_9vens_120","center-between":"_center-between_9vens_125","center-around":"_center-around_9vens_130","center-evenly":"_center-evenly_9vens_135","justify-end":"_justify-end_9vens_140","align-end":"_align-end_9vens_144","end-start":"_end-start_9vens_148","end-center":"_end-center_9vens_153","end-end":"_end-end_9vens_158","end-stretch":"_end-stretch_9vens_163","end-between":"_end-between_9vens_168","end-around":"_end-around_9vens_173","end-evenly":"_end-evenly_9vens_178","justify-stretch":"_justify-stretch_9vens_183","align-stretch":"_align-stretch_9vens_187","stretch-start":"_stretch-start_9vens_191","stretch-center":"_stretch-center_9vens_196","stretch-end":"_stretch-end_9vens_201","stretch-stretch":"_stretch-stretch_9vens_206","stretch-between":"_stretch-between_9vens_211","stretch-around":"_stretch-around_9vens_216","stretch-evenly":"_stretch-evenly_9vens_221","justify-between":"_justify-between_9vens_226","align-between":"_align-between_9vens_230","between-start":"_between-start_9vens_234","between-center":"_between-center_9vens_239","between-end":"_between-end_9vens_244","between-stretch":"_between-stretch_9vens_249","between-between":"_between-between_9vens_254","between-around":"_between-around_9vens_259","between-evenly":"_between-evenly_9vens_264","justify-around":"_justify-around_9vens_269","align-around":"_align-around_9vens_273","around-start":"_around-start_9vens_277","around-center":"_around-center_9vens_282","around-end":"_around-end_9vens_287","around-stretch":"_around-stretch_9vens_292","around-between":"_around-between_9vens_297","around-around":"_around-around_9vens_302","around-evenly":"_around-evenly_9vens_307","justify-evenly":"_justify-evenly_9vens_312","align-evenly":"_align-evenly_9vens_316","evenly-start":"_evenly-start_9vens_320","evenly-center":"_evenly-center_9vens_325","evenly-end":"_evenly-end_9vens_330","evenly-stretch":"_evenly-stretch_9vens_335","evenly-between":"_evenly-between_9vens_340","evenly-around":"_evenly-around_9vens_345","evenly-evenly":"_evenly-evenly_9vens_350",b:ee,border:ne,"m-center":"_m-center_9vens_363",shadow:_e,"card-box":"_card-box_9vens_368","w-25":"_w-25_9vens_372","w-25w":"_w-25w_9vens_376","h-25":"_h-25_9vens_380","h-25h":"_h-25h_9vens_384","wh-25":"_wh-25_9vens_388","w-50":"_w-50_9vens_393","w-50w":"_w-50w_9vens_397","h-50":"_h-50_9vens_401","h-50h":"_h-50h_9vens_405","wh-50":"_wh-50_9vens_409","w-75":"_w-75_9vens_414","w-75w":"_w-75w_9vens_418","h-75":"_h-75_9vens_422","h-75h":"_h-75h_9vens_426","wh-75":"_wh-75_9vens_430","w-100":"_w-100_9vens_435","w-100w":"_w-100w_9vens_439","h-100":"_h-100_9vens_443","h-100h":"_h-100h_9vens_447","wh-100":"_wh-100_9vens_451","p-0":"_p-0_9vens_456","px-0":"_px-0_9vens_460","py-0":"_py-0_9vens_464","pt-0":"_pt-0_9vens_468","pr-0":"_pr-0_9vens_472","pb-0":"_pb-0_9vens_476","pl-0":"_pl-0_9vens_480","p-1":"_p-1_9vens_484","px-1":"_px-1_9vens_488","py-1":"_py-1_9vens_492","pt-1":"_pt-1_9vens_496","pr-1":"_pr-1_9vens_500","pb-1":"_pb-1_9vens_504","pl-1":"_pl-1_9vens_508","p-2":"_p-2_9vens_512","px-2":"_px-2_9vens_516","py-2":"_py-2_9vens_520","pt-2":"_pt-2_9vens_524","pr-2":"_pr-2_9vens_528","pb-2":"_pb-2_9vens_532","pl-2":"_pl-2_9vens_536","p-3":"_p-3_9vens_540","px-3":"_px-3_9vens_544","py-3":"_py-3_9vens_548","pt-3":"_pt-3_9vens_552","pr-3":"_pr-3_9vens_556","pb-3":"_pb-3_9vens_560","pl-3":"_pl-3_9vens_564","b-0":"_b-0_9vens_568","bx-0":"_bx-0_9vens_572","by-0":"_by-0_9vens_576","bt-0":"_bt-0_9vens_580","br-0":"_br-0_9vens_584","bb-0":"_bb-0_9vens_588","bl-0":"_bl-0_9vens_592","b-1":"_b-1_9vens_596","bx-1":"_bx-1_9vens_600","by-1":"_by-1_9vens_604","bt-1":"_bt-1_9vens_608","br-1":"_br-1_9vens_612","bb-1":"_bb-1_9vens_616","bl-1":"_bl-1_9vens_620","b-2":"_b-2_9vens_624","bx-2":"_bx-2_9vens_628","by-2":"_by-2_9vens_632","bt-2":"_bt-2_9vens_636","br-2":"_br-2_9vens_640","bb-2":"_bb-2_9vens_644","bl-2":"_bl-2_9vens_648","b-3":"_b-3_9vens_652","bx-3":"_bx-3_9vens_656","by-3":"_by-3_9vens_660","bt-3":"_bt-3_9vens_664","br-3":"_br-3_9vens_668","bb-3":"_bb-3_9vens_672","bl-3":"_bl-3_9vens_676","m-0":"_m-0_9vens_680","mx-0":"_mx-0_9vens_684","my-0":"_my-0_9vens_688","mt-0":"_mt-0_9vens_692","mr-0":"_mr-0_9vens_696","mb-0":"_mb-0_9vens_700","ml-0":"_ml-0_9vens_704","m-1":"_m-1_9vens_708","mx-1":"_mx-1_9vens_712","my-1":"_my-1_9vens_716","mt-1":"_mt-1_9vens_720","mr-1":"_mr-1_9vens_724","mb-1":"_mb-1_9vens_728","ml-1":"_ml-1_9vens_732","m-2":"_m-2_9vens_736","mx-2":"_mx-2_9vens_740","my-2":"_my-2_9vens_744","mt-2":"_mt-2_9vens_748","mr-2":"_mr-2_9vens_752","mb-2":"_mb-2_9vens_756","ml-2":"_ml-2_9vens_760","m-3":"_m-3_9vens_764","mx-3":"_mx-3_9vens_768","my-3":"_my-3_9vens_772","mt-3":"_mt-3_9vens_776","mr-3":"_mr-3_9vens_780","mb-3":"_mb-3_9vens_784","ml-3":"_ml-3_9vens_788","bgc-pirmary":"_bgc-pirmary_9vens_792","bgc-success":"_bgc-success_9vens_796","bgc-warning":"_bgc-warning_9vens_800","bgc-danger":"_bgc-danger_9vens_804","bgc-info":"_bgc-info_9vens_808","bgc-dark-fill":"_bgc-dark-fill_9vens_812","overflow-x-auto":"_overflow-x-auto_9vens_816","overflow-x-hidden":"_overflow-x-hidden_9vens_821","overflow-x-scroll":"_overflow-x-scroll_9vens_825","overflow-y-auto":"_overflow-y-auto_9vens_829","overflow-y-hidden":"_overflow-y-hidden_9vens_834","overflow-y-scroll":"_overflow-y-scroll_9vens_838","overflow-hidden":"_overflow-hidden_9vens_842","overflow-auto":"_overflow-auto_9vens_846","overflow-scroll":"_overflow-scroll_9vens_851",clearfix:se,"float-left":"_float-left_9vens_861","float-right":"_float-right_9vens_865","vis-hidden":"_vis-hidden_9vens_869","text-center":"_text-center_9vens_873","text-end":"_text-end_9vens_877","text-primary":"_text-primary_9vens_881","text-success":"_text-success_9vens_885","text-warning":"_text-warning_9vens_889","text-danger":"_text-danger_9vens_893","text-info":"_text-info_9vens_897","text-black":"_text-black_9vens_901","text-white":"_text-white_9vens_905","login-root":"_login-root_9vens_909","login-cvs":"_login-cvs_9vens_921","rotate-y-180":"_rotate-y-180_9vens_955","rotate-y-0":"_rotate-y-0_9vens_959","login-form-button":"_login-form-button_9vens_963","site-form-item-icon":"_site-form-item-icon_9vens_967","login-form-forgot":"_login-form-forgot_9vens_971"};function C(s){return o=>{o.preventDefault(),s==null||s(o)}}function te(){const s=N(j),{isLogined:o}=n.useContext(O);if(o())return e(U,{to:"/",replace:!0});const[a,t]=n.useState(!1),i=n.useCallback(()=>t(l=>!l),[]),h=n.useMemo(()=>u(H,{children:[e(re,{isRegister:a,onLinkClick:i}),e(oe,{isRegister:a,onLinkClick:i})]}),[a,i]),d=n.useRef(null),b=E(l=>{const m=d.current;if(!m)return;Object.assign(m,l);let _=null;const v=setTimeout(()=>{_=new T(m,l.width/1920*120),_.animate(),_.bindEvent()},500);return()=>{clearTimeout(v),_==null||_.abortAnimate(),_==null||_.abortEvent()}},[d]);return u("div",{ref:b,className:s("login-root"),children:[e("canvas",{ref:d,className:s("login-cvs")}),e("div",{className:s("card-box"),children:h})]})}const ye=P.memo(te);function re(s){const{isRegister:o,onLinkClick:a}=s,t=N(j),i=n.useCallback(C(a),[]),h=V(),[d]=q(),[b]=r.useForm(),{signIn:l}=n.useContext(O),m=n.useCallback(async _=>{try{const v=await d(_).unwrap(),{isOk:c,token:y,username:x,invalidTime:p,mes:z}=v;if(c){l({user:x,token:y,expiration:p},_.remember),h("/",{replace:!0});return}g.warning(z)}catch(v){console.error(v)}},[]);return e(R,{className:t(["card-login",o?"rotate-y-180":""]),children:u(r,{form:b,name:"normal_login",initialValues:{remember:!0},onFinish:m,className:"login-form",children:[e(r.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:e(f,{prefix:e(M,{className:t("site-form-item-icon")}),placeholder:"手机号"})}),e(r.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:e(f,{prefix:e(k,{className:t("site-form-item-icon")}),type:"password",placeholder:"密码"})}),u(r.Item,{children:[e(r.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e(B,{children:"Remember me"})}),e("a",{className:t("login-form-forgot"),href:"xxx",onClick:C(),children:"Forgot password"})]}),u(r.Item,{children:[e(S,{type:"primary",htmlType:"submit",className:t("login-form-button"),children:"Login"}),"Or"," ",e("a",{onClick:i,href:"xxx",children:"register now!"})]})]})})}function oe(s){const{isRegister:o,onLinkClick:a}=s,t=N(j),i=n.useCallback(C(a),[]),[h]=A(),[d]=r.useForm(),[b,l]=n.useState({validateStatus:void 0,help:void 0}),m=n.useCallback(v=>{h(v).unwrap().then(c=>{if(c.isOk){g.success(c.message),a();return}g.warning(c.message)}).catch(c=>console.error(c))},[]),_=n.useCallback((v,c)=>{if(!v.password2)return;const{password:y}=c;l(x=>{const p=v.password2===y;return{...x,validateStatus:p?void 0:"error",help:p?void 0:"两次输入的密码不一致！"}})},[]);return e(R,{className:t(["card-register",o?"rotate-y-0":""]),children:u(r,{form:d,onFinish:m,onValuesChange:_,children:[e(r.Item,{name:"username",rules:[{required:!0}],children:e(f,{prefix:e(M,{className:t("site-form-item-icon")}),placeholder:"手机号"})}),e(r.Item,{name:"password",rules:[{required:!0}],children:e(f,{prefix:e(k,{className:t("site-form-item-icon")}),type:"password",placeholder:"密码"})}),e(r.Item,{name:"password2",rules:[{required:!0}],validateStatus:b.validateStatus,help:b.help,children:e(f,{prefix:e(k,{className:t("site-form-item-icon")}),type:"password",placeholder:"确认密码"})}),u(r.Item,{children:[e(S,{type:"primary",htmlType:"submit",className:t("login-form-button"),children:"Register"}),"Or"," ",e("a",{onClick:i,href:"xxx",children:"login now!"})]})]})})}export{te as PageLogin,ye as default};
