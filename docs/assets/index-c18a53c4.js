var M=Object.defineProperty;var C=(i,t,s)=>t in i?M(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var l=(i,t,s)=>(C(i,typeof t!="symbol"?t+"":t,s),s),y=(i,t,s)=>{if(!t.has(i))throw TypeError("Cannot "+s)};var e=(i,t,s)=>(y(i,t,"read from private field"),s?s.call(i):t.get(i)),x=(i,t,s)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,s)},m=(i,t,s,n)=>(y(i,t,"write to private field"),n?n.call(i,s):t.set(i,s),s);import{o as b}from"./index-f8d17fc4.js";import{r as f}from"./antd-57ea9798.js";import{u as z}from"./use-resize-65cef62a.js";const R="_partcle_1tj4z_1",_="_particle-canvas_1tj4z_10",j="_particle-content_1tj4z_16",g={partcle:R,particleCanvas:_,particleContent:j};class E{constructor(t,s){this.min=t,this.max=s}get(){return Math.random()*(this.max-this.min)+this.min}}const w=new E(-1,1),P=new E(2,4);class p{constructor(t){l(this,"xv",w.get());l(this,"yv",w.get());l(this,"radius",P.get());l(this,"x");l(this,"y");l(this,"color");this.canvas=t,this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.color=`rgba(254,250,255,${1-1/this.radius})`}draw(){const t=this.canvas.getContext("2d");t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.closePath(),t.strokeStyle=this.color,t.stroke()}update(){const{width:t,height:s}=this.canvas;(this.x<0||this.x>t)&&(this.xv*=-1),(this.y<0||this.y>s)&&(this.yv*=-1),this.x+=this.xv,this.y+=this.yv,this.draw()}}var h,d,a,u;class A{constructor(t,s=100,n=100){x(this,h,[]);x(this,d,0);x(this,a,null);x(this,u,new AbortController);this.canvas=t,this.lineMax=n;for(let o=0;o<s;o++)e(this,h).push(new p(this.canvas))}drawLine(){e(this,h).forEach((t,s)=>{e(this,h).slice(s+1).forEach(n=>{const o=Math.abs(t.x-n.x);if(o>this.lineMax)return;const r=Math.abs(t.y-n.y);if(r>this.lineMax)return;const v=Math.sqrt(o**2+r**2);if(v>this.lineMax)return;const c=this.canvas.getContext("2d");c.beginPath(),c.moveTo(t.x,t.y),c.lineTo(n.x,n.y),c.closePath(),c.strokeStyle=`rgba(254,250,255, ${1-v/this.lineMax})`,c.lineWidth=.8,c.stroke()})})}animate(){m(this,d,requestAnimationFrame(this.animate.bind(this))),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),e(this,h).forEach(s=>s.update()),this.drawLine()}abortAnimate(){cancelAnimationFrame(e(this,d))}bindEvent(){m(this,u,new AbortController);const{signal:t}=e(this,u);this.canvas.addEventListener("mouseover",({offsetX:s,offsetY:n})=>{e(this,a)||(m(this,a,new p(this.canvas)),e(this,a).x=s,e(this,a).y=n,e(this,a).xv=0,e(this,a).yv=0,e(this,h).push(e(this,a)))},{signal:t}),this.canvas.addEventListener("mousemove",({offsetX:s,offsetY:n})=>{e(this,a)&&(e(this,a).x=s,e(this,a).y=n)},{signal:t}),this.canvas.addEventListener("mouseout",()=>{e(this,a)&&e(this,h).includes(e(this,a))&&(e(this,h).splice(e(this,h).indexOf(e(this,a)),1),m(this,a,null))},{signal:t})}abortEvent(){e(this,u).abort()}}h=new WeakMap,d=new WeakMap,a=new WeakMap,u=new WeakMap;function q(){const i=f.useRef(null),t=f.useRef(null),s=z(t);return f.useEffect(()=>{if(!s)return;const[n]=s.contentBoxSize,o=i.current;if(!o)return;Object.assign(o,{width:n.inlineSize,height:n.blockSize});let r=null;const v=setTimeout(()=>{r=new A(o,n.inlineSize/1920*120,100),r.animate(),r.bindEvent()},500);return()=>{clearTimeout(v),r==null||r.abortAnimate(),r==null||r.abortEvent()}},[s]),b.jsx("div",{ref:t,className:g.partcle,children:b.jsx("canvas",{ref:i,className:g.particleCanvas})})}export{q as Component};
