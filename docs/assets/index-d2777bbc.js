import{p as z,F as R,B as A,j as N,t as F,P as j,a0 as H}from"./useMergedState-f9769ca5.js";import{c as V,b as _}from"./isVisible-caf5e9d2.js";import{r,R as S}from"./jsx-runtime-d4f0a224.js";import{r as I,u as D}from"./render-e0c466da.js";const G=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${o})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},M=z("Wave",e=>[G(e)]);function U(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function h(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&U(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function q(e){const{borderTopColor:t,borderColor:o,backgroundColor:i}=getComputedStyle(e);return h(t)?t:h(o)?o:h(i)?i:null}function C(e){return Number.isNaN(e)?0:e}const J=e=>{const{className:t,target:o}=e,i=r.useRef(null),[c,f]=r.useState(null),[v,b]=r.useState([]),[g,n]=r.useState(0),[p,m]=r.useState(0),[W,w]=r.useState(0),[x,T]=r.useState(0),[L,B]=r.useState(!1),y={left:g,top:p,width:W,height:x,borderRadius:v.map(a=>`${a}px`).join(" ")};c&&(y["--wave-color"]=c);function E(){const a=getComputedStyle(o);f(q(o));const s=a.position==="static",{borderLeftWidth:l,borderTopWidth:u}=a;n(s?o.offsetLeft:C(-parseFloat(l))),m(s?o.offsetTop:C(-parseFloat(u))),w(o.offsetWidth),T(o.offsetHeight);const{borderTopLeftRadius:d,borderTopRightRadius:O,borderBottomLeftRadius:P,borderBottomRightRadius:$}=a;b([d,O,$,P].map(k=>C(parseFloat(k))))}return r.useEffect(()=>{if(o){const a=R(()=>{E(),B(!0)});let s;return typeof ResizeObserver<"u"&&(s=new ResizeObserver(E),s.observe(o)),()=>{R.cancel(a),s==null||s.disconnect()}}},[]),L?r.createElement(A,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(a,s)=>{var l;if(s.deadline||s.propertyName==="opacity"){const u=(l=i.current)===null||l===void 0?void 0:l.parentElement;D(u).then(()=>{var d;(d=u.parentElement)===null||d===void 0||d.removeChild(u)})}return!1}},a=>{let{className:s}=a;return r.createElement("div",{ref:i,className:N(t,s),style:y})}):null};function K(e,t){const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",e==null||e.insertBefore(o,e==null?void 0:e.firstChild),I(r.createElement(J,{target:e,className:t}),o)}function Q(e,t){function o(){const i=e.current;K(i,t)}return o}const X=e=>{const{children:t,disabled:o}=e,{getPrefixCls:i}=r.useContext(F),c=r.useRef(null),f=i("wave"),[,v]=M(f),b=Q(c,N(f,v));if(S.useEffect(()=>{const n=c.current;if(!n||n.nodeType!==1||o)return;const p=m=>{m.target.tagName==="INPUT"||!_(m.target)||!n.getAttribute||n.getAttribute("disabled")||n.disabled||n.className.includes("disabled")||n.className.includes("-leave")||b()};return n.addEventListener("click",p,!0),()=>{n.removeEventListener("click",p,!0)}},[o]),!S.isValidElement(t))return t??null;const g=j(t)?H(t.ref,c):c;return V(t,{ref:g})},oe=X;export{oe as W};
