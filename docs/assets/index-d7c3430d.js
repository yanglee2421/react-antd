import{r as c,j as e,a as q,R as P}from"./jsx-runtime-d4f0a224.js";import{u as j}from"./useClass-0fad7c64.js";import{u as z}from"./useResize-46d5ce5b.js";import{u as H,j as V,o as A,a as T,l as E}from"./index-bb8dadff.js";import{P as $}from"./class-particle-420d30ac.js";import{g as B,m as x,h as D}from"./api-rtkq-d736cb74.js";import{F as t}from"./index-589c3421.js";import{C as R}from"./index-72e63614.js";import{I as h,C as U}from"./index-05fd8596.js";import{U as I}from"./UserOutlined-745c3ce1.js";import{A as G,_ as N}from"./AntdIcon-ed17ea01.js";import{B as O}from"./button-fb07ef91.js";import"./useMergedState-f9769ca5.js";import"./render-e0c466da.js";import"./Keyframes-0c92003a.js";import"./index-2be6ccbe.js";import"./zoom-0c098fb8.js";import"./isVisible-caf5e9d2.js";import"./EllipsisOutlined-0da9b0cc.js";import"./useFlexGapSupport-21dface7.js";import"./Skeleton-299b939b.js";import"./EyeOutlined-5b47683c.js";import"./index-d2777bbc.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const K=J;var S=function(s,o){return c.createElement(G,N(N({},s),{},{ref:o,icon:K}))};S.displayName="LockOutlined";const k=c.forwardRef(S),Q="_absolute_1sqcd_1",W="_relative_1sqcd_5",X="_fixed_1sqcd_9",Y="_sticky_1sqcd_13",Z="_none_1sqcd_17",ee="_flex_1sqcd_21",_e="_b_1sqcd_234",se="_border_1sqcd_359",te="_shadow_1sqcd_369",ce="_clearfix_1sqcd_848",L={absolute:Q,relative:W,fixed:X,sticky:Y,none:Z,flex:ee,"flex-1":"_flex-1_1sqcd_25","flex-direction-column":"_flex-direction-column_1sqcd_29","flex-1-hidden":"_flex-1-hidden_1sqcd_33","flex-1-auto":"_flex-1-auto_1sqcd_38","flex-1-overlay":"_flex-1-overlay_1sqcd_43","flex-column":"_flex-column_1sqcd_48","justify-start":"_justify-start_1sqcd_54","align-start":"_align-start_1sqcd_58","start-start":"_start-start_1sqcd_62","start-center":"_start-center_1sqcd_67","start-end":"_start-end_1sqcd_72","start-stretch":"_start-stretch_1sqcd_77","start-between":"_start-between_1sqcd_82","start-around":"_start-around_1sqcd_87","start-evenly":"_start-evenly_1sqcd_92","justify-center":"_justify-center_1sqcd_97","align-center":"_align-center_1sqcd_101","center-start":"_center-start_1sqcd_105","center-center":"_center-center_1sqcd_110","center-end":"_center-end_1sqcd_115","center-stretch":"_center-stretch_1sqcd_120","center-between":"_center-between_1sqcd_125","center-around":"_center-around_1sqcd_130","center-evenly":"_center-evenly_1sqcd_135","justify-end":"_justify-end_1sqcd_140","align-end":"_align-end_1sqcd_144","end-start":"_end-start_1sqcd_148","end-center":"_end-center_1sqcd_153","end-end":"_end-end_1sqcd_158","end-stretch":"_end-stretch_1sqcd_163","end-between":"_end-between_1sqcd_168","end-around":"_end-around_1sqcd_173","end-evenly":"_end-evenly_1sqcd_178","justify-stretch":"_justify-stretch_1sqcd_183","align-stretch":"_align-stretch_1sqcd_187","stretch-start":"_stretch-start_1sqcd_191","stretch-center":"_stretch-center_1sqcd_196","stretch-end":"_stretch-end_1sqcd_201","stretch-stretch":"_stretch-stretch_1sqcd_206","stretch-between":"_stretch-between_1sqcd_211","stretch-around":"_stretch-around_1sqcd_216","stretch-evenly":"_stretch-evenly_1sqcd_221","justify-between":"_justify-between_1sqcd_226","align-between":"_align-between_1sqcd_230","between-start":"_between-start_1sqcd_234","between-center":"_between-center_1sqcd_239","between-end":"_between-end_1sqcd_244","between-stretch":"_between-stretch_1sqcd_249","between-between":"_between-between_1sqcd_254","between-around":"_between-around_1sqcd_259","between-evenly":"_between-evenly_1sqcd_264","justify-around":"_justify-around_1sqcd_269","align-around":"_align-around_1sqcd_273","around-start":"_around-start_1sqcd_277","around-center":"_around-center_1sqcd_282","around-end":"_around-end_1sqcd_287","around-stretch":"_around-stretch_1sqcd_292","around-between":"_around-between_1sqcd_297","around-around":"_around-around_1sqcd_302","around-evenly":"_around-evenly_1sqcd_307","justify-evenly":"_justify-evenly_1sqcd_312","align-evenly":"_align-evenly_1sqcd_316","evenly-start":"_evenly-start_1sqcd_320","evenly-center":"_evenly-center_1sqcd_325","evenly-end":"_evenly-end_1sqcd_330","evenly-stretch":"_evenly-stretch_1sqcd_335","evenly-between":"_evenly-between_1sqcd_340","evenly-around":"_evenly-around_1sqcd_345","evenly-evenly":"_evenly-evenly_1sqcd_350",b:_e,border:se,"m-center":"_m-center_1sqcd_363",shadow:te,"card-box":"_card-box_1sqcd_369","w-25":"_w-25_1sqcd_373","h-25":"_h-25_1sqcd_377","wh-25":"_wh-25_1sqcd_381","w-50":"_w-50_1sqcd_386","h-50":"_h-50_1sqcd_390","wh-50":"_wh-50_1sqcd_394","w-75":"_w-75_1sqcd_399","h-75":"_h-75_1sqcd_403","wh-75":"_wh-75_1sqcd_407","w-100":"_w-100_1sqcd_412","h-100":"_h-100_1sqcd_416","wh-100":"_wh-100_1sqcd_420","p-0":"_p-0_1sqcd_425","px-0":"_px-0_1sqcd_429","py-0":"_py-0_1sqcd_434","pt-0":"_pt-0_1sqcd_439","pr-0":"_pr-0_1sqcd_443","pb-0":"_pb-0_1sqcd_447","pl-0":"_pl-0_1sqcd_451","p-1":"_p-1_1sqcd_455","px-1":"_px-1_1sqcd_459","py-1":"_py-1_1sqcd_464","pt-1":"_pt-1_1sqcd_469","pr-1":"_pr-1_1sqcd_473","pb-1":"_pb-1_1sqcd_477","pl-1":"_pl-1_1sqcd_481","p-2":"_p-2_1sqcd_485","px-2":"_px-2_1sqcd_489","py-2":"_py-2_1sqcd_494","pt-2":"_pt-2_1sqcd_499","pr-2":"_pr-2_1sqcd_503","pb-2":"_pb-2_1sqcd_507","pl-2":"_pl-2_1sqcd_511","p-3":"_p-3_1sqcd_515","px-3":"_px-3_1sqcd_519","py-3":"_py-3_1sqcd_524","pt-3":"_pt-3_1sqcd_529","pr-3":"_pr-3_1sqcd_533","pb-3":"_pb-3_1sqcd_537","pl-3":"_pl-3_1sqcd_541","b-0":"_b-0_1sqcd_545","bx-0":"_bx-0_1sqcd_549","by-0":"_by-0_1sqcd_554","bt-0":"_bt-0_1sqcd_559","br-0":"_br-0_1sqcd_563","bb-0":"_bb-0_1sqcd_567","bl-0":"_bl-0_1sqcd_571","b-1":"_b-1_1sqcd_575","bx-1":"_bx-1_1sqcd_579","by-1":"_by-1_1sqcd_584","bt-1":"_bt-1_1sqcd_589","br-1":"_br-1_1sqcd_593","bb-1":"_bb-1_1sqcd_597","bl-1":"_bl-1_1sqcd_601","b-2":"_b-2_1sqcd_605","bx-2":"_bx-2_1sqcd_609","by-2":"_by-2_1sqcd_614","bt-2":"_bt-2_1sqcd_619","br-2":"_br-2_1sqcd_623","bb-2":"_bb-2_1sqcd_627","bl-2":"_bl-2_1sqcd_631","b-3":"_b-3_1sqcd_635","bx-3":"_bx-3_1sqcd_639","by-3":"_by-3_1sqcd_644","bt-3":"_bt-3_1sqcd_649","br-3":"_br-3_1sqcd_653","bb-3":"_bb-3_1sqcd_657","bl-3":"_bl-3_1sqcd_661","m-0":"_m-0_1sqcd_665","mx-0":"_mx-0_1sqcd_669","my-0":"_my-0_1sqcd_674","mt-0":"_mt-0_1sqcd_679","mr-0":"_mr-0_1sqcd_683","mb-0":"_mb-0_1sqcd_687","ml-0":"_ml-0_1sqcd_691","m-1":"_m-1_1sqcd_695","mx-1":"_mx-1_1sqcd_699","my-1":"_my-1_1sqcd_704","mt-1":"_mt-1_1sqcd_709","mr-1":"_mr-1_1sqcd_713","mb-1":"_mb-1_1sqcd_717","ml-1":"_ml-1_1sqcd_721","m-2":"_m-2_1sqcd_725","mx-2":"_mx-2_1sqcd_729","my-2":"_my-2_1sqcd_734","mt-2":"_mt-2_1sqcd_739","mr-2":"_mr-2_1sqcd_743","mb-2":"_mb-2_1sqcd_747","ml-2":"_ml-2_1sqcd_751","m-3":"_m-3_1sqcd_755","mx-3":"_mx-3_1sqcd_759","my-3":"_my-3_1sqcd_764","mt-3":"_mt-3_1sqcd_769","mr-3":"_mr-3_1sqcd_773","mb-3":"_mb-3_1sqcd_777","ml-3":"_ml-3_1sqcd_781","bgc-pirmary":"_bgc-pirmary_1sqcd_785","bgc-success":"_bgc-success_1sqcd_789","bgc-warning":"_bgc-warning_1sqcd_793","bgc-danger":"_bgc-danger_1sqcd_797","bgc-info":"_bgc-info_1sqcd_801","bgc-dark-fill":"_bgc-dark-fill_1sqcd_805","overflow-x-auto":"_overflow-x-auto_1sqcd_809","overflow-x-hidden":"_overflow-x-hidden_1sqcd_814","overflow-x-scroll":"_overflow-x-scroll_1sqcd_818","overflow-y-auto":"_overflow-y-auto_1sqcd_822","overflow-y-hidden":"_overflow-y-hidden_1sqcd_827","overflow-y-scroll":"_overflow-y-scroll_1sqcd_831","overflow-hidden":"_overflow-hidden_1sqcd_835","overflow-auto":"_overflow-auto_1sqcd_839","overflow-scroll":"_overflow-scroll_1sqcd_844",clearfix:ce,"float-left":"_float-left_1sqcd_854","float-right":"_float-right_1sqcd_858","vis-hidden":"_vis-hidden_1sqcd_862","text-center":"_text-center_1sqcd_866","text-end":"_text-end_1sqcd_870","text-primary":"_text-primary_1sqcd_874","text-success":"_text-success_1sqcd_878","text-warning":"_text-warning_1sqcd_882","text-danger":"_text-danger_1sqcd_886","text-info":"_text-info_1sqcd_890","text-black":"_text-black_1sqcd_894","text-white":"_text-white_1sqcd_898","login-root":"_login-root_1sqcd_902","login-cvs":"_login-cvs_1sqcd_914","rotate-y-180":"_rotate-y-180_1sqcd_948","rotate-y-0":"_rotate-y-0_1sqcd_952","login-form-button":"_login-form-button_1sqcd_956","site-form-item-icon":"_site-form-item-icon_1sqcd_960","login-form-forgot":"_login-form-forgot_1sqcd_964"};function C(d){return s=>{s.preventDefault(),d==null||d(s)}}const p=j(L);function re(d){const{isRegister:s,onRegisterClick:o}=d,a=c.useCallback(C(o),[]),m=H(),u=V(),[i]=B(),[b]=t.useForm(),n=c.useCallback(l=>{i(l).unwrap().then(_=>{const{isOk:r,token:g,username:w,invalidTime:y,mes:F}=_,M={username:w,invalidTime:y,token:g,remember:l.remember,isLogined:!0};if(r){m(A(M)),u("/",{replace:!0});return}x.warning(F)}).catch(_=>{console.error(_)})},[]);return e(R,{className:p(["card-login",s?"rotate-y-180":""]),children:q(t,{form:b,name:"normal_login",initialValues:{remember:!0},onFinish:n,className:"login-form",children:[e(t.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:e(h,{prefix:e(I,{className:p("site-form-item-icon")}),placeholder:"手机号"})}),e(t.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:e(h,{prefix:e(k,{className:p("site-form-item-icon")}),type:"password",placeholder:"密码"})}),q(t.Item,{children:[e(t.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e(U,{children:"Remember me"})}),e("a",{className:p("login-form-forgot"),href:"xxx",onClick:C(),children:"Forgot password"})]}),q(t.Item,{children:[e(O,{type:"primary",htmlType:"submit",className:p("login-form-button"),children:"Login"}),"Or"," ",e("a",{onClick:a,href:"xxx",children:"register now!"})]})]})})}const f=j(L);function ne(d){const{isRegister:s,onLoginClick:o}=d,a=c.useCallback(C(o),[]),[m]=D(),[u]=t.useForm(),[i,b]=c.useState({validateStatus:void 0,help:void 0}),n=c.useCallback(_=>{m(_).unwrap().then(r=>{if(r.isOk){x.success(r.message),o();return}x.warning(r.message)}).catch(r=>console.error(r))},[]),l=c.useCallback((_,r)=>{if(!_.password2)return;const{password:g}=r;b(w=>{const y=_.password2===g;return{...w,validateStatus:y?void 0:"error",help:y?void 0:"两次输入的密码不一致！"}})},[]);return e(R,{className:f(["card-register",s?"rotate-y-0":""]),children:q(t,{form:u,onFinish:n,onValuesChange:l,children:[e(t.Item,{name:"username",rules:[{required:!0}],children:e(h,{prefix:e(I,{className:f("site-form-item-icon")}),placeholder:"手机号"})}),e(t.Item,{name:"password",rules:[{required:!0}],children:e(h,{prefix:e(k,{className:f("site-form-item-icon")}),type:"password",placeholder:"密码"})}),e(t.Item,{name:"password2",rules:[{required:!0}],validateStatus:i.validateStatus,help:i.help,children:e(h,{prefix:e(k,{className:f("site-form-item-icon")}),type:"password",placeholder:"确认密码"})}),q(t.Item,{children:[e(O,{type:"primary",htmlType:"submit",className:f("login-form-button"),children:"Register"}),"Or"," ",e("a",{onClick:a,href:"xxx",children:"login now!"})]})]})})}const v=j(L);function de(){if(T(n=>n.auth.isLogined))return e(E,{to:"/",replace:!0});const[s,o]=c.useState(!1),a=c.useCallback(()=>o(n=>!n),[]),m=c.useMemo(()=>e(re,{isRegister:s,onRegisterClick:a}),[s,a]),u=c.useMemo(()=>e(ne,{isRegister:s,onLoginClick:a}),[s,a]),i=c.useRef(null),b=z(n=>{const l=i.current;if(!l)return;Object.assign(l,n);let _=null;const r=setTimeout(()=>{_=new $(l,n.width/1920*120),_.animate(),_.bindEvent()},500);return()=>{clearTimeout(r),_==null||_.abortAnimate(),_==null||_.abortEvent()}},[i]);return q("div",{ref:b,className:v("login-root"),children:[e("canvas",{ref:i,className:v("login-cvs")}),q("div",{className:v("card-box"),children:[m,u]})]})}const Oe=P.memo(de);export{de as PageLogin,Oe as default};
